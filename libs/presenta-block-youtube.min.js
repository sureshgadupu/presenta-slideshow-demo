!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).PresentaBlockYoutube=t()}(this,(function(){"use strict";var e="style_youtube__1KEl0",t="style_blockmouse__3K3Xl",o="style_playing__2SoSR";!function(e,t){void 0===t&&(t={});var o=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===o&&i.firstChild?i.insertBefore(n,i.firstChild):i.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}(".style_youtube__1KEl0{display:flex;position:relative}.style_youtube__1KEl0,.style_youtube__1KEl0 iframe{width:100%;height:100%}.style_youtube__1KEl0 img{-o-object-fit:cover;object-fit:cover}.style_blockmouse__3K3Xl,.style_youtube__1KEl0 img{position:absolute;top:0;left:0;width:100%;height:100%}.style_playing__2SoSR img{display:none}");let i=!1;const n=[],s=function(s,a){a._mode;const l="present"===a._mode,d="print"===a._mode,r=a.key||" ",u=document.createElement("div");u.classList.add(e);var p,y="presenta-player-"+Math.random(),c=a.controls?"":`<div class="${t}"></div>`;u.innerHTML=`\n    <div id="${y}"></div>\n    <img src="${a.thumb}" />\n    ${c}`,s.appendChild(u);let m=!1;const f=()=>{setTimeout((()=>{p=new YT.Player(y,{height:"100%",width:"100%",videoId:a.url,playerVars:{autoplay:a.autoplay?1:0,controls:a.controls?1:0,loop:a.loop?1:0,modestbranding:1,end:a.end||null,start:a.start||0},events:{onReady:e=>{a.preload?(p.playVideo(),p.pauseVideo()):_()},onStateChange:e=>{0===e.data&&u.classList.remove(o)}}})}))};this.beforeDestroy=()=>{a._rootElement.removeEventListener("keyup",b),s.removeEventListener("click",h)},this.stepForward=e=>{};const _=()=>{p.playVideo(),u.classList.add(o),m=!0},h=()=>{p?m?(p.pauseVideo(),m=!1):_():i?f():n.push(f)},b=e=>{if(e.key===r&&(h(),e.stopPropagation(),e.preventDefault()),p){if("m"===e.key&&(p.isMuted()?p.unMute():p.mute()),"+"===e.key){let e=p.getVolume();e+=10,p.setVolume(e)}if("-"===e.key){let e=p.getVolume();e-=10,p.setVolume(e)}}};l&&(a._rootElement.addEventListener("keyup",b),s.addEventListener("click",h)),(a.autoplay||a.preload)&&l&&h(),d&&h()};return s.install=e=>{(()=>{if(!document.querySelector("#presenta-youtube-iframe-api-script")){var e=document.createElement("script");e.id="presenta-youtube-iframe-api-script",e.src="https://www.youtube.com/iframe_api";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t),window.onYouTubeIframeAPIReady=()=>{i=!0,n.forEach((e=>e()))}}})(),e.addBlock("youtube",s),e.io.addPreload&&e.io.addPreload({type:"youtube",field:"thumb",as:"image"})},s.init=e=>{},s.run=e=>{e.scenes.forEach((e=>{e.blocks.forEach((e=>{"youtube"===e.type&&(e.thumb=`https://i.ytimg.com/vi/${e.url}/hqdefault.jpg`)}))}))},"undefined"!=typeof window&&window.Presenta&&window.Presenta.use(s),s}));
